(function(){"use strict";var t={7200:function(t,e,i){var s=i(6369),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("main",{staticClass:"container"},[e("h2",[t._v("Weather app")]),e("UnitsToggleButton",{on:{"toggle-units":t.toggleUnits}}),e("form",{staticClass:"search-form",on:{submit:function(t){t.preventDefault()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getCoordsByCityName.apply(null,arguments)}}},[e("div",{staticClass:"search-form__content"},[e("SearchCity",{attrs:{placeholder:"Search city"},model:{value:t.formData.searchCityQuery,callback:function(e){t.$set(t.formData,"searchCityQuery",e)},expression:"formData.searchCityQuery"}}),e("button",{staticClass:"btn search-form__btn",attrs:{type:"button","aria-label":"Search city"},on:{click:t.getCoordsByCityName}}),e("SearchResults",{directives:[{name:"show",rawName:"v-show",value:!t.isCityChosen,expression:"!isCityChosen"}],attrs:{citiesData:t.citiesData,searchCityQuery:t.formData.searchCityQuery},on:{"update-coords":t.updateCoords}})],1),t.formData.searchError?e("div",{staticClass:"search-form__error text-s mt-10"},[t._v(t._s(t.formData.searchError))]):t._e()]),e("LocalWeather",{on:{"update-coords":t.updateCoords}}),t.isDataLoaded?e("CurrentWeatherDisplay",{attrs:{currentConditions:t.currentConditions,units:t.units}}):t._e()],1)])},n=[],a=(i(1703),i(6265)),o=i.n(a);const c="d456af1653589db20bd812fbeb08a1f9",l="http://api.openweathermap.org/data/2.5/weather",u="http://api.openweathermap.org/geo/1.0/direct",d="https://openweathermap.org/images/flags";var h=function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"city__input"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"search-form__input",attrs:{type:"text",id:"city__input",placeholder:t.placeholder},domProps:{value:t.dataValue},on:{input:function(e){e.target.composing||(t.dataValue=e.target.value)}}})])},p=[],m={name:"SearchCity",props:{placeholder:String,value:String},computed:{dataValue:{get(){return this.value},set(t){this.$emit("input",t)}}}},C=m,f=i(1001),y=(0,f.Z)(C,h,p,!1,null,null,null),_=y.exports,g=function(){var t=this,e=t._self._c;return e("div",{class:["weather-display",t.getTimeOfDay]},[e("div",{staticClass:"block-left"},[e("div",{staticClass:"display_location mb-10"},[t._v(t._s(t.currentConditions.city)+", "+t._s(t.currentConditions.country))]),e("div",{staticClass:"display_description mb-5"},[t._v(t._s(t.currentConditions.description))]),e("div",{staticClass:"display_temperature"},[t._v(t._s(Math.round(t.currentConditions.temp))+" °"+t._s(t.unitsTemperature))]),e("div",{staticClass:"display_weather_icon"},[e("img",{attrs:{src:t.setWeatherIcon,alt:"Weather icon"}})])]),e("div",{staticClass:"block-right"},[e("div",{staticClass:"display_feels_like mb-5"},[e("span",{staticClass:"text-bold"},[t._v("Feels like:")]),t._v(" "+t._s(Math.round(t.currentConditions.feelsLike))+" °"+t._s(t.unitsTemperature))]),e("div",{staticClass:"display_humidity mb-5"},[e("span",{staticClass:"text-bold"},[t._v("Humidity:")]),t._v(" "+t._s(t.currentConditions.humidity)+" %")]),e("div",{staticClass:"display_wind mb-5"},[e("span",{staticClass:"text-bold"},[t._v("Wind:")]),t._v(" "+t._s(t.windConverter)+" "+t._s(t.currentConditions.windSpeed)+" "+t._s(t.unitsWindSpeed)+" "),e("div",{staticClass:"wind-icon ml-10 mt-10"},[e("svg",{style:t.setWindArrow,attrs:{width:"26",height:"32",viewBox:"0 0 26 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M12.9072 30.7679C12.9407 30.8517 13.0593 30.8517 13.0928 30.7679L24.892 1.27009C24.9273\n        1.18174 24.8309 1.09863 24.7487 1.14658L13 8L1.25127 1.14658C1.16908 1.09863 1.0727 1.18174 1.10804\n        1.27009L12.9072 30.7679Z",stroke:"teal","stroke-width":"1.5"}})])])])])])},v=[],w={name:"CurrentWeatherDisplay",props:{currentConditions:Object,units:String},computed:{windConverter(){if(""===this.currentConditions.windDir)return"";const t=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],e=this.currentConditions.windDir,i=[Math.floor((e+11.25)%360/22.5)];return t[i]},setWindArrow(){return""===this.currentConditions.windDir?"":`transform: rotate(${this.currentConditions.windDir}deg)`},getTimeOfDay(){let t;return t=this.currentConditions.icon?this.currentConditions.icon.endsWith("d")?"day":"night":"",t},setWeatherIcon(){return this.currentConditions.icon?`https://openweathermap.org/img/wn/${this.currentConditions.icon}@2x.png`:""},unitsTemperature(){return"metric"===this.units?"C":"F"},unitsWindSpeed(){return"metric"===this.units?"m/s":"mph"}}},b=w,x=(0,f.Z)(b,g,v,!1,null,null,null),D=x.exports,k=function(){var t=this,e=t._self._c;return t.citiesData?e("ul",{staticClass:"city-list"},t._l(t.citiesData,(function(i,s){return e("li",{key:s,staticClass:"city-list__item",on:{click:function(e){return t.chooseCity(i)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.chooseCity(i)}}},[e("div",{staticClass:"city-list__item-location"},[e("div",{staticClass:"text-m"},[t._v(t._s(i.name)+", "+t._s(i.country))]),i.state?e("div",{staticClass:"text-s"},[t._v(t._s(i.state))]):t._e()]),e("div",{staticClass:"city-list__item-flag"},[e("img",{attrs:{src:t.setCountryFlag(s),alt:"Country flag"}})]),e("div",{staticClass:"city-list__item-coords"},[e("div",{staticClass:"text-xs"},[t._v("lat: "+t._s(i.lat.toFixed(3)))]),e("div",{staticClass:"text-xs"},[t._v("lon: "+t._s(i.lon.toFixed(3)))])])])})),0):t._e()},W=[],S=(i(2262),i(4506),{name:"SearchResults",props:{citiesData:Array,searchCityQuery:String},methods:{setCountryFlag(t){if(!this.citiesData)return"";const e=this.citiesData.at(t).country.toLowerCase();return`${d}/${e}.png`},chooseCity(t){const e={};({lat:e.lat,lon:e.lon}=t),this.$emit("update-coords",e)}}}),E=S,O=(0,f.Z)(E,k,W,!1,null,null,null),N=O.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-local"},[e("button",{staticClass:"btn search-local__btn",attrs:{type:"button","aria-label":"Search current location"},on:{click:t.localCoords}}),e("div",{staticClass:"ml-10 mt-8"},[t._v("Current location")])])},L=[],P={name:"LocalWeather",methods:{getPosition(){return new Promise(((t,e)=>{navigator.geolocation.getCurrentPosition(t,e)}))},async getCurrentCoords(){const t={};try{const e=await this.getPosition();({latitude:t.lat,longitude:t.lon}=e.coords)}catch(e){console.error(e.message)}return t},async localCoords(){const t=await this.getCurrentCoords();this.$emit("update-coords",t)}}},Q=P,$=(0,f.Z)(Q,T,L,!1,null,null,null),Z=$.exports,F=function(){var t=this,e=t._self._c;return e("div",{staticClass:"units__toggle"},[t._m(0),e("div",{staticClass:"switch"},[e("label",{attrs:{for:"units-checkbox","aria-label":"Units toggle"}},[e("input",{attrs:{type:"checkbox",name:"units",id:"units-checkbox"},on:{change:t.toggle}}),e("span",{staticClass:"slider round"})])]),t._m(1)])},j=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"units__text text-xs"},[t._v("Metric:"),e("br"),t._v(" °C, m/s")])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"units__text text-xs"},[t._v("Imperial:"),e("br"),t._v(" °F, mph")])}],B={name:"UnitsToggleButton",data(){return{isToggled:!1}},methods:{toggle(){this.isToggled=!this.isToggled,this.$emit("toggle-units",this.isToggled)}}},M=B,U=(0,f.Z)(M,F,j,!1,null,null,null),V=U.exports,A={name:"App",data(){return{coords:{lat:null,lon:null},formData:{searchCityQuery:null,searchError:null},isDataLoaded:!1,isCityChosen:!1,citiesData:null,units:"metric",currentConditions:null}},components:{SearchCity:_,CurrentWeatherDisplay:D,SearchResults:N,LocalWeather:Z,UnitsToggleButton:V},methods:{async getCoordsByCityName(){this.isCityChosen=!1,this.citiesData=null,this.formData.searchError=null;try{if(null===this.formData.searchCityQuery||""===this.formData.searchCityQuery)throw new Error("Please enter a city name");const t=await o().get(u,{params:{q:this.formData.searchCityQuery,appid:c,limit:5}});if(0===t.data.length)throw new Error("Not found");this.citiesData=t.data}catch(t){this.formData.searchError=t.message,console.error(t.message)}return this.citiesData},async getCurrentWeather(){this.formData.searchError=null;try{let t,e;if(!this.coords.lat||!this.coords.lon)throw new Error("Empty coords");({lat:t,lon:e}=this.coords);const i=await o().get(l,{params:{lat:t,lon:e,appid:c,units:this.units}});this.isDataLoaded=!0,this.currentConditions={city:i.data.name,country:i.data.sys.country,temp:i.data.main.temp,feelsLike:i.data.main.feels_like,humidity:i.data.main.humidity,description:i.data.weather[0].main,icon:i.data.weather[0].icon,windDir:i.data.wind.deg,windSpeed:i.data.wind.speed}||{}}catch(t){console.error(t.message)}},updateCoords(t){this.coords=t,this.getCurrentWeather(),this.isCityChosen=!0},toggleUnits(t){this.units=t?"imperial":"metric"}},watch:{units(){this.coords.lat&&this.coords.lon&&this.getCurrentWeather()}}},I=A,R=(0,f.Z)(I,r,n,!1,null,null,null),q=R.exports;s.ZP.config.productionTip=!1,new s.ZP({render:t=>t(q)}).$mount("#app")}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}i.m=t,function(){var t=[];i.O=function(e,s,r,n){if(!s){var a=1/0;for(u=0;u<t.length;u++){s=t[u][0],r=t[u][1],n=t[u][2];for(var o=!0,c=0;c<s.length;c++)(!1&n||a>=n)&&Object.keys(i.O).every((function(t){return i.O[t](s[c])}))?s.splice(c--,1):(o=!1,n<a&&(a=n));if(o){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[s,r,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,n,a=s[0],o=s[1],c=s[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(c)var u=c(i)}for(e&&e(s);l<a.length;l++)n=a[l],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(u)},s=self["webpackChunkweather_app_vue2"]=self["webpackChunkweather_app_vue2"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(7200)}));s=i.O(s)})();
//# sourceMappingURL=app.458d5f5d.js.map